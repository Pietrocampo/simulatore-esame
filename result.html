<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Risultato</title>
<style>
body { font-family: Arial; max-width: 900px; margin: auto; }
.correct { color: green; }
.wrong { color: red; }
.question { margin-bottom: 20px; }
</style>
</head>
<body>

<h1>Risultato Esame</h1>

<div id="summary"></div>
<hr>
<div id="details"></div>

<script>
const data = JSON.parse(localStorage.getItem("results"));
let score = 0;

const summary = document.getElementById("summary");
const details = document.getElementById("details");

data.forEach((q, i) => {
  let className = "";
  let delta = 0;

  if (q.userAnswer === null) {
    delta = 0;
  } else if (q.userAnswer === q.correct) {
    delta = 1;
    className = "correct";
  } else {
    delta = -0.5;
    className = "wrong";
  }

  score += delta;

  const div = document.createElement("div");
  div.className = "question";
  div.innerHTML = `
    <p><strong>${i+1}. ${q.question}</strong></p>
    <p>Risposta data: <span class="${className}">
      ${q.userAnswer ?? "Nessuna risposta"}
    </span></p>
    <p>Risposta corretta: <strong>${q.correct}</strong></p>
  `;
  details.appendChild(div);
});

score = Math.max(0, score);
const finalScore = score * 2;

summary.innerHTML = `
<h2>Punteggio: ${finalScore}/100</h2>
<h2>${finalScore >= 60 ? "✅ ESAME SUPERATO" : "❌ ESAME NON SUPERATO"}</h2>
`;
</script>

